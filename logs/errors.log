2025-03-01 15:55:06 - core.risk_management           - ERROR    - Error calculating stop loss pips: unsupported operand type(s) for -: 'int' and 'dict'
2025-03-01 15:55:06 - core.risk_management           - ERROR    - Error calculating position size: unsupported operand type(s) for -: 'int' and 'dict'
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'
2025-03-01 15:55:06 - trading_bot                    - ERROR    - [36m[2025-03-01 15:55:05][0m: Unexpected error: can't multiply sequence by non-int of type 'float'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 316, in process_message
    position_sizes, risk_amount = calculate_position_size(
                                  ~~~~~~~~~~~~~~~~~~~~~~~^
        instrument_data,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        self.selected_account
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 362, in calculate_position_size
    est_risk = account['accountBalance'] * 0.005  # Estimate 0.5% risk
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
TypeError: can't multiply sequence by non-int of type 'float'
2025-03-01 16:00:49 - core.risk_management           - ERROR    - Invalid entry_point type: <class 'dict'>
2025-03-01 16:00:49 - core.risk_management           - ERROR    - Invalid entry_point type: <class 'dict'>
2025-03-01 16:00:51 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:51 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:51 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:51 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:51 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:51 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:51 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:51 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:52 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:52 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:52 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 429, message='Too Many Requests', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:52 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 429, message='Too Many Requests', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:52 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:52 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:52 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:00:52 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 400, message='Bad Request', url='https://demo.tradelocker.com/backend-api/trade/accounts/1011989/orders'
2025-03-01 16:02:34 - core.risk_management           - ERROR    - Error calculating stop loss pips: unsupported operand type(s) for -: 'int' and 'dict'
2025-03-01 16:02:34 - core.risk_management           - ERROR    - Error calculating position size: unsupported operand type(s) for -: 'int' and 'dict'
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'
2025-03-01 16:02:34 - trading_bot                    - ERROR    - [36m[2025-03-01 16:00:46][0m: Unexpected error: can't multiply sequence by non-int of type 'float'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 316, in process_message
    position_sizes, risk_amount = calculate_position_size(
                                  ~~~~~~~~~~~~~~~~~~~~~~~^
        instrument_data,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        self.selected_account
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 362, in calculate_position_size
    est_risk = account['accountBalance'] * 0.005  # Estimate 0.5% risk
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
TypeError: can't multiply sequence by non-int of type 'float'
2025-03-01 16:02:34 - core.risk_management           - ERROR    - Error calculating stop loss pips: unsupported operand type(s) for -: 'int' and 'dict'
2025-03-01 16:02:34 - core.risk_management           - ERROR    - Error calculating position size: unsupported operand type(s) for -: 'int' and 'dict'
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'
2025-03-01 16:02:34 - trading_bot                    - ERROR    - [36m[2025-03-01 16:02:32][0m: Unexpected error: can't multiply sequence by non-int of type 'float'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'int' and 'dict'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 316, in process_message
    position_sizes, risk_amount = calculate_position_size(
                                  ~~~~~~~~~~~~~~~~~~~~~~~^
        instrument_data,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        self.selected_account
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 362, in calculate_position_size
    est_risk = account['accountBalance'] * 0.005  # Estimate 0.5% risk
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
TypeError: can't multiply sequence by non-int of type 'float'
2025-03-01 23:20:38 - trading_bot                    - ERROR    - Error selecting account: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 166, in select_account
    try:
    
  File "<frozen codecs>", line 325, in decode
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
2025-03-01 23:20:38 - trading_bot                    - ERROR    - Account selection failed. Exiting.
2025-03-01 23:20:38 - asyncio                        - ERROR    - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000013F2F6F4690>
2025-03-01 23:20:38 - asyncio                        - ERROR    - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000013F2F6F86E0>
2025-03-01 23:22:24 - root                           - ERROR    - Critical error: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 461, in <module>
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 455, in main
    sys.exit(1)
    ~~~~~~~~^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 381, in run
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 381, in run
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 381, in run
  [Previous line repeated 3 more times]
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 365, in run
    self.logger.error("Initialization failed. Exiting.")
     ^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\cli\display_menu.py", line 11, in display_menu
    choice = input(f"{Fore.GREEN}Enter your choice (1-2): {Style.RESET_ALL}")
  File "<frozen codecs>", line 325, in decode
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
2025-03-01 23:22:53 - trading_bot                    - ERROR    - Error selecting account: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 167, in select_account
    account_id = input("Please enter the Account Number you want to use for trading: ").strip()
                 ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen codecs>", line 325, in decode
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
2025-03-01 23:22:53 - trading_bot                    - ERROR    - Account selection failed. Exiting.
2025-03-01 23:22:53 - asyncio                        - ERROR    - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000013FED7B8690>
2025-03-01 23:22:53 - asyncio                        - ERROR    - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000013FED73BE00>
2025-03-01 23:28:55 - trading_bot                    - ERROR    - Error selecting account: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 167, in select_account
    account_id = input("Please enter the Account Number you want to use for trading: ").strip()
                 ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen codecs>", line 325, in decode
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
2025-03-01 23:28:55 - trading_bot                    - ERROR    - Account selection failed. Exiting.
2025-03-01 23:28:55 - asyncio                        - ERROR    - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001C554E08690>
2025-03-01 23:28:55 - asyncio                        - ERROR    - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001C554D8BE00>
2025-03-02 04:01:46 - tradelocker_api.endpoints.auth - ERROR    - Failed to refresh token: Cannot connect to host demo-maintenance.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 10:41:44 - trading_bot                    - ERROR    - Account ID 90 is not valid.
2025-03-02 10:41:44 - trading_bot                    - ERROR    - Account selection failed. Exiting.
2025-03-02 10:46:32 - trading_bot                    - ERROR    - [36m[2025-03-01 18:13:05][0m: Unexpected error: 'NewsEventFilter' object has no attribute 'can_place_order'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 228, in process_message
    can_trade, reason = self.news_filter.can_place_order(parsed_signal, current_time)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NewsEventFilter' object has no attribute 'can_place_order'
2025-03-02 10:46:32 - trading_bot                    - ERROR    - [36m[2025-03-02 10:46:29][0m: Unexpected error: 'NewsEventFilter' object has no attribute 'can_place_order'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 228, in process_message
    can_trade, reason = self.news_filter.can_place_order(parsed_signal, current_time)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NewsEventFilter' object has no attribute 'can_place_order'
2025-03-02 10:56:58 - trading_bot                    - ERROR    - [36m[2025-03-02 10:52:43][0m: Unexpected error: 'NewsEventFilter' object has no attribute 'can_place_order'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 228, in process_message
    if self.enable_news_filter:
                            ^^^
AttributeError: 'NewsEventFilter' object has no attribute 'can_place_order'
2025-03-02 10:56:59 - trading_bot                    - ERROR    - [36m[2025-03-02 10:46:29][0m: Unexpected error: 'NewsEventFilter' object has no attribute 'can_place_order'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 228, in process_message
    if self.enable_news_filter:
                            ^^^
AttributeError: 'NewsEventFilter' object has no attribute 'can_place_order'
2025-03-02 11:07:33 - telethon.client.telegrambaseclient - ERROR    - Unhandled exception from keepalive_handle after cancelling <class '_asyncio.Task'> (<Task finished name='Task-7' coro=<UpdateMethods._keepalive_loop() done, defined at C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\updates.py:481> exception=OperationalError('database is locked')>)
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\helpers.py", line 176, in _cancel
    await task
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\updates.py", line 517, in _keepalive_loop
    self._save_states_and_entities()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\telegrambaseclient.py", line 694, in _save_states_and_entities
    self.session.process_entities(types.contacts.ResolvedPeer(None, [e._as_input_peer() for e in entities], []))
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\sessions\sqlite.py", line 301, in process_entities
    c.executemany(
    ~~~~~~~~~~~~~^
        'insert or replace into entities values (?,?,?,?,?,?)', rows)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked
2025-03-02 11:07:39 - asyncio                        - ERROR    - Task exception was never retrieved
future: <Task finished name='Task-52' coro=<TelegramBaseClient._disconnect_coro() done, defined at C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\telegrambaseclient.py:707> exception=OperationalError('database is locked')>
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\telegrambaseclient.py", line 737, in _disconnect_coro
    self._save_states_and_entities()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\telegrambaseclient.py", line 694, in _save_states_and_entities
    self.session.process_entities(types.contacts.ResolvedPeer(None, [e._as_input_peer() for e in entities], []))
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\sessions\sqlite.py", line 301, in process_entities
    c.executemany(
    ~~~~~~~~~~~~~^
        'insert or replace into entities values (?,?,?,?,?,?)', rows)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked
2025-03-02 11:07:39 - telethon.client.telegrambaseclient - ERROR    - Unhandled exception from keepalive_handle after cancelling <class '_asyncio.Task'> (<Task finished name='Task-7' coro=<UpdateMethods._keepalive_loop() done, defined at C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\updates.py:481> exception=OperationalError('database is locked')>)
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\helpers.py", line 176, in _cancel
    await task
sqlite3.OperationalError: database is locked
2025-03-02 11:07:44 - trading_bot                    - ERROR    - Unexpected error in main loop: database is locked
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\updates.py", line 38, in _run_until_disconnected
    raise self._updates_error
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\updates.py", line 308, in _update_loop
    diff = await self(get_diff)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\users.py", line 30, in __call__
    return await self._call(self._sender, request, ordered=ordered)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\users.py", line 93, in _call
    self.session.process_entities(result)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\sessions\sqlite.py", line 301, in process_entities
    c.executemany(
    ~~~~~~~~~~~~~^
        'insert or replace into entities values (?,?,?,?,?,?)', rows)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 414, in run
    await self.client.run_until_disconnected()
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\updates.py", line 43, in _run_until_disconnected
    await self.disconnect()
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\telegrambaseclient.py", line 737, in _disconnect_coro
    self._save_states_and_entities()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\telegrambaseclient.py", line 694, in _save_states_and_entities
    self.session.process_entities(types.contacts.ResolvedPeer(None, [e._as_input_peer() for e in entities], []))
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\sessions\sqlite.py", line 301, in process_entities
    c.executemany(
    ~~~~~~~~~~~~~^
        'insert or replace into entities values (?,?,?,?,?,?)', rows)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked
2025-03-02 11:07:44 - telethon.client.telegrambaseclient - ERROR    - Unhandled exception from keepalive_handle after cancelling <class '_asyncio.Task'> (<Task finished name='Task-7' coro=<UpdateMethods._keepalive_loop() done, defined at C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\updates.py:481> exception=OperationalError('database is locked')>)
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\helpers.py", line 176, in _cancel
    await task
sqlite3.OperationalError: database is locked
2025-03-02 11:07:50 - root                           - ERROR    - Critical error: database is locked
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 468, in <module>
    asyncio.run(main())
    ~~~~~~~~~~~^^^^^^^^
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 460, in main
    await bot.run()
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 421, in run
    await self.cleanup()
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 372, in cleanup
    await self.client.disconnect()
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\telegrambaseclient.py", line 737, in _disconnect_coro
    self._save_states_and_entities()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\client\telegrambaseclient.py", line 694, in _save_states_and_entities
    self.session.process_entities(types.contacts.ResolvedPeer(None, [e._as_input_peer() for e in entities], []))
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\telethon\sessions\sqlite.py", line 301, in process_entities
    c.executemany(
    ~~~~~~~~~~~~~^
        'insert or replace into entities values (?,?,?,?,?,?)', rows)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked
2025-03-02 15:31:49 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 15:31:49 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 15:32:00 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 15:32:00 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 15:32:23 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 15:32:23 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 15:32:34 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 15:32:34 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 15:33:18 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: 
2025-03-02 15:33:18 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: 
2025-03-02 15:33:28 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Service unavailable: trade/accounts/1011989/positions
2025-03-02 15:33:38 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Service unavailable: trade/accounts/1011989/positions
2025-03-02 15:33:48 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Service unavailable: trade/accounts/1011989/positions
2025-03-02 15:33:58 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Service unavailable: trade/accounts/1011989/positions
2025-03-02 15:34:08 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Service unavailable: trade/accounts/1011989/positions
2025-03-02 15:34:52 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: 
2025-03-02 15:34:52 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: 
2025-03-02 15:35:02 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Service unavailable: trade/accounts/1011989/positions
2025-03-02 15:35:12 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Service unavailable: trade/accounts/1011989/positions
2025-03-02 15:41:01 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 
2025-03-02 15:41:01 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 
2025-03-02 15:41:01 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 
2025-03-02 15:41:01 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 
2025-03-02 15:41:01 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/orders failed after 3 attempts: 
2025-03-02 15:41:01 - tradelocker_api.endpoints.orders - ERROR    - Failed to place order: 
2025-03-02 16:48:02 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 16:48:02 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 18:01:24 - trading_bot                    - ERROR    - [36m[2025-03-02 18:01:23][0m: Error processing signal: Missing key 'instrument'. Skipping this signal.
2025-03-02 18:04:53 - core.signal_parser             - ERROR    - Error parsing OpenAI response: Expecting value: line 1 column 1 (char 0)
2025-03-02 18:06:30 - core.signal_parser             - ERROR    - Error parsing OpenAI response: Expecting value: line 1 column 1 (char 0)
2025-03-02 18:12:35 - core.risk_management           - ERROR    - Error calculating stop loss pips: unsupported operand type(s) for -: 'NoneType' and 'int'
2025-03-02 18:12:35 - core.risk_management           - ERROR    - Error calculating position size: unsupported operand type(s) for -: 'NoneType' and 'int'
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'NoneType' and 'int'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'NoneType' and 'int'
2025-03-02 18:12:35 - trading_bot                    - ERROR    - [36m[2025-03-02 18:12:33][0m: Unexpected error: 'NoneType' object is not iterable. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'NoneType' and 'int'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'NoneType' and 'int'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 260, in process_message
    position_sizes, risk_amount = calculate_position_size(
                                  ~~~~~~~~~~~~~~~~~~~~~~~^
        instrument_data,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        self.selected_account
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 359, in calculate_position_size
    position_sizes = [min_position for _ in take_profits]
                                            ^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2025-03-02 18:12:49 - core.risk_management           - ERROR    - Error calculating stop loss pips: unsupported operand type(s) for -: 'NoneType' and 'NoneType'
2025-03-02 18:12:49 - core.risk_management           - ERROR    - Error calculating position size: unsupported operand type(s) for -: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'NoneType' and 'NoneType'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'NoneType' and 'NoneType'
2025-03-02 18:12:49 - trading_bot                    - ERROR    - [36m[2025-03-02 18:12:47][0m: Unexpected error: can't multiply sequence by non-int of type 'float'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 169, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point)
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'NoneType' and 'NoneType'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 322, in calculate_position_size
    stop_loss_pips = calculate_stop_loss_pips(stop_loss, entry_point, instrument)
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 173, in calculate_stop_loss_pips
    return abs(stop_loss - entry_point) * 10000
               ~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'NoneType' and 'NoneType'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 260, in process_message
    position_sizes, risk_amount = calculate_position_size(
                                  ~~~~~~~~~~~~~~~~~~~~~~~^
        instrument_data,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        self.selected_account
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 362, in calculate_position_size
    est_risk = account['accountBalance'] * 0.005  # Estimate 0.5% risk
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
TypeError: can't multiply sequence by non-int of type 'float'
2025-03-02 18:23:24 - core.risk_management           - ERROR    - Error calculating position size: float division by zero
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 342, in calculate_position_size
    position_per_tp = total_pos_in_lots / len(take_profits)
                      ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~
ZeroDivisionError: float division by zero
2025-03-02 18:23:24 - trading_bot                    - ERROR    - [36m[2025-03-02 18:23:22][0m: Unexpected error: can't multiply sequence by non-int of type 'float'. Skipping this signal.
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 342, in calculate_position_size
    position_per_tp = total_pos_in_lots / len(take_profits)
                      ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~
ZeroDivisionError: float division by zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 260, in process_message
    position_sizes, risk_amount = calculate_position_size(
                                  ~~~~~~~~~~~~~~~~~~~~~~~^
        instrument_data,
        ^^^^^^^^^^^^^^^^
    ...<3 lines>...
        self.selected_account
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\core\risk_management.py", line 362, in calculate_position_size
    est_risk = account['accountBalance'] * 0.005  # Estimate 0.5% risk
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
TypeError: can't multiply sequence by non-int of type 'float'
2025-03-02 22:24:34 - tradelocker_api.endpoints.auth - ERROR    - Failed to refresh token: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 22:24:36 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-02 22:24:36 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-03 08:49:41 - tradelocker_api.endpoints.auth - ERROR    - Failed to refresh token: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-03 08:49:41 - services.news_filter           - ERROR    - Error updating calendar: Cannot connect to host nfs.faireconomy.media:443 ssl:default [getaddrinfo failed]
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\connector.py", line 1362, in _create_direct_connection
    hosts = await self._resolve_host(host, port, traces=traces)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\connector.py", line 995, in _resolve_host
    return await asyncio.shield(resolved_host_task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\connector.py", line 1026, in _resolve_host_with_throttle
    addrs = await self._resolver.resolve(host, port, family=self._family)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\resolver.py", line 36, in resolve
    infos = await self._loop.getaddrinfo(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 939, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        None, getaddr_func, host, port, family, type, proto, flags)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "C:\Users\Uncrowned King\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11004] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\services\news_filter.py", line 60, in update_calendar
    async with session.get(self.calendar_url) as response:
               ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\client.py", line 1425, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\client.py", line 703, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        req, traces=traces, timeout=real_timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\connector.py", line 548, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\connector.py", line 1056, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\.venv\Lib\site-packages\aiohttp\connector.py", line 1368, in _create_direct_connection
    raise ClientConnectorDNSError(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorDNSError: Cannot connect to host nfs.faireconomy.media:443 ssl:default [getaddrinfo failed]
2025-03-03 08:51:09 - trading_bot                    - ERROR    - Account ID 6060 is not valid.
2025-03-03 08:51:09 - trading_bot                    - ERROR    - Account selection failed. Exiting.
2025-03-03 11:10:03 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445099'
2025-03-03 11:10:04 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445098'
2025-03-03 11:10:04 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445100'
2025-03-03 11:10:49 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445100'
2025-03-03 11:10:49 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445098'
2025-03-03 11:10:49 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445099'
2025-03-03 11:11:23 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445099'
2025-03-03 11:11:23 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445098'
2025-03-03 11:11:24 - services.pos_monitor           - ERROR    - Failed to update stop loss after 3 attempts: 401, message='Unauthorized', url='https://demo.tradelocker.com/backend-api/trade/positions/7277816997838445100'
2025-03-03 12:26:46 - trading_bot                    - ERROR    - Error selecting account: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 167, in select_account
    account_id = input("Please enter the Account Number you want to use for trading: ").strip()
                 ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen codecs>", line 325, in decode
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
2025-03-03 12:26:46 - trading_bot                    - ERROR    - Account selection failed. Exiting.
2025-03-03 12:26:46 - asyncio                        - ERROR    - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000002804EB6C690>
2025-03-03 12:26:46 - asyncio                        - ERROR    - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000002804EAF3E00>
2025-03-03 12:26:52 - trading_bot                    - ERROR    - Account ID 669 is not valid.
2025-03-03 12:26:52 - trading_bot                    - ERROR    - Account selection failed. Exiting.
2025-03-03 15:29:18 - tradelocker_api.api_client     - ERROR    - Request to trade/accounts/1011989/positions failed after 3 attempts: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-03 15:29:18 - tradelocker_api.endpoints.accounts - ERROR    - Failed to fetch open positions: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-03 16:08:41 - tradelocker_api.endpoints.auth - ERROR    - Failed to refresh token: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
2025-03-03 19:34:53 - trading_bot                    - ERROR    - Error setting up Telegram client: TelegramBaseClient.__init__() got an unexpected keyword argument 'sqlite_auto_vacuum'
Traceback (most recent call last):
  File "C:\Users\Uncrowned King\Downloads\tradeLockerV3\main.py", line 110, in setup_telegram_client
    self.client = TelegramClient(
                  ~~~~~~~~~~~~~~^
        './my_session',
        ^^^^^^^^^^^^^^^
    ...<5 lines>...
        sqlite_auto_vacuum=True  # Helps prevent DB locks
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: TelegramBaseClient.__init__() got an unexpected keyword argument 'sqlite_auto_vacuum'
2025-03-03 19:34:53 - trading_bot                    - ERROR    - Initialization failed. Exiting.
2025-03-03 19:37:10 - trading_bot                    - ERROR    - Account ID 660 is not valid.
2025-03-03 19:37:10 - trading_bot                    - ERROR    - Account selection failed. Exiting.
2025-03-03 20:56:07 - tradelocker_api.endpoints.auth - ERROR    - Failed to refresh token: Cannot connect to host demo.tradelocker.com:443 ssl:default [getaddrinfo failed]
